(function(e){function t(t){for(var n,u,o=t[0],s=t[1],i=t[2],f=0,p=[];f<o.length;f++)u=o[f],Object.prototype.hasOwnProperty.call(a,u)&&a[u]&&p.push(a[u][0]),a[u]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);l&&l(t);while(p.length)p.shift()();return c.push.apply(c,i||[]),r()}function r(){for(var e,t=0;t<c.length;t++){for(var r=c[t],n=!0,o=1;o<r.length;o++){var s=r[o];0!==a[s]&&(n=!1)}n&&(c.splice(t--,1),e=u(u.s=r[0]))}return e}var n={},a={app:0},c=[];function u(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,u),r.l=!0,r.exports}u.m=e,u.c=n,u.d=function(e,t,r){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(u.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)u.d(r,n,function(t){return e[t]}.bind(null,n));return r},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var i=0;i<o.length;i++)t(o[i]);var l=s;c.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},3730:function(e,t,r){"use strict";r("97c2")},"4a98":function(e,t,r){},"71c8":function(e,t,r){},"8bd0":function(e,t,r){"use strict";r("4a98")},"97c2":function(e,t,r){},aa08:function(e,t,r){},b2f4:function(e,t,r){"use strict";r("71c8")},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("c-header"),r("v-main",[r("router-view")],1),r("v-snackbar",{attrs:{vertical:""},scopedSlots:e._u([{key:"action",fn:function(t){var n=t.attrs;return[r("v-btn",e._b({attrs:{text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",n,!1),[e._v(" Close ")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.errorText)+" ")])],1)},c=[],u=r("d4ec"),o=r("bee2"),s=r("262e"),i=r("2caf"),l=r("9ab4"),f=r("1b40"),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app-bar",{staticClass:"c-header",attrs:{app:"",elevation:"0",color:"green",dark:""}},[r("v-container",[r("v-row",[r("v-col",[r("div",{staticClass:"d-flex align-center"},[r("p",{staticClass:"mb-0"},[e._v(" Currency App ")]),r("v-spacer"),r("v-btn",{staticClass:"mr-2",attrs:{text:"",to:{name:"Конвертер"}}},[r("span",[e._v(" Конвертер ")])]),r("v-btn",{attrs:{text:"",to:{name:"Курсы валют"}}},[r("span",[e._v(" Курсы валют ")])])],1)])],1)],1)],1)},v=[],b=function(e){Object(s["a"])(r,e);var t=Object(i["a"])(r);function r(){return Object(u["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r)}(f["c"]);b=Object(l["a"])([f["a"]],b);var d=b,h=d,y=(r("3730"),r("2877")),m=r("6544"),g=r.n(m),O=r("40dc"),j=r("8336"),k=r("62ad"),x=r("a523"),w=r("0fd9"),C=r("2fa4"),_=Object(y["a"])(h,p,v,!1,null,null,null),R=_.exports;g()(_,{VAppBar:O["a"],VBtn:j["a"],VCol:k["a"],VContainer:x["a"],VRow:w["a"],VSpacer:C["a"]});var V=R,S=r("c0e2"),$=new S["TinyEmitter"],E={$on:function(){return $.on.apply($,arguments)},$once:function(){return $.once.apply($,arguments)},$off:function(){return $.off.apply($,arguments)},$emit:function(){return $.emit.apply($,arguments)}},T=function(e){Object(s["a"])(r,e);var t=Object(i["a"])(r);function r(){var e;return Object(u["a"])(this,r),e=t.apply(this,arguments),e.errorText="",e.snackbar=!1,e}return Object(o["a"])(r,[{key:"created",value:function(){var e=this;E.$on("updateError",(function(t){e.errorText=t,e.snackbar=!0}))}},{key:"resetError",value:function(){this.errorText="",this.snackbar=!1}}]),r}(f["c"]);T=Object(l["a"])([Object(f["a"])({components:{"c-header":V}})],T);var B=T,I=B,A=r("7496"),P=r("f6c4"),M=r("2db4"),U=Object(y["a"])(I,a,c,!1,null,null,null),J=U.exports;g()(U,{VApp:A["a"],VBtn:j["a"],VMain:P["a"],VSnackbar:M["a"]});var N=r("8c4f"),z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"v-converter d-flex align-center justify-center"},[r("v-row",[r("v-col",[r("c-convert-input")],1)],1)],1)},D=[],F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"c-convert-input"},[r("p",{staticClass:"text-body-2"},[e._v(' Текст формата "15 usd in rub" ')]),r("v-text-field",{attrs:{value:e.value,outlined:"",label:e.label,loading:e.loading},on:{input:e._handleInput}}),e.error?r("p",{staticClass:"text-body-2 error--text"},[e._v(" "+e._s(e.error)+" ")]):e._e(),e.result&&!e.loading?r("p",[e._v(" "+e._s(e.result+" "+e.targetCurrency)+" ")]):e._e()],1)},L=[],Z=r("1da1"),q=(r("96cf"),r("99af"),r("a9e3"),r("b680"),r("4d63"),r("c607"),r("ac1f"),r("2c3e"),r("25f0"),r("00b4"),r("466d"),r("4de4"),r("d3b7"),r("7db0"),r("e9c4"),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:520;Object(u["a"])(this,e),this.errors=[{code:200,message:"ok"},{code:429,message:"You have hit your rate-limit"},{code:404,message:"A requested resource does not exist"},{code:500,message:"Internal Server Error"},{code:520,message:"Unknown Error"}],this.error=null,this.error=this.errors.find((function(e){return e.code===t}))||null}return Object(o["a"])(e,[{key:"get",value:function(){return this.error}}]),e}());function Y(e){return G.apply(this,arguments)}function G(){return G=Object(Z["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return r=e.sent,e.prev=3,e.next=6,r.json();case 6:r.parsedBody=e.sent,e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](3);case 11:if(r.ok){e.next=13;break}throw new q(r.status);case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),G.apply(this,arguments)}function H(e){return K.apply(this,arguments)}function K(){return K=Object(Z["a"])(regeneratorRuntime.mark((function e(t){var r,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{method:"get"},e.next=3,Y(new Request(t,r));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),K.apply(this,arguments)}var Q="https://freecurrencyapi.net/api/v2",W="a0c1aa70-7d13-11ec-adf5-13fde3e2676c",X=function(){function e(){Object(u["a"])(this,e)}return Object(o["a"])(e,[{key:"latest",value:function(e){return H("".concat(Q,"/latest?apikey=").concat(W,"&base_currency=").concat(e)).then((function(e){return e.parsedBody?e.parsedBody.data:new q})).catch((function(e){return console.error(e),e}))}},{key:"historical",value:function(e,t,r){return H("".concat(Q,"/historical?apikey=").concat(W,"&base_currency=").concat(e,"&date_from=").concat(t,"&date_to=").concat(r)).then((function(e){console.log(e)})).catch((function(e){console.error(e)}))}}]),e}(),ee=new X,te=function(e){Object(s["a"])(r,e);var t=Object(i["a"])(r);function r(){return Object(u["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r,[{key:"updateRates",value:function(){var e=Object(Z["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ee.latest(t);case 2:if(r=e.sent,r instanceof q){e.next=7;break}return e.abrupt("return",r);case 7:n=r.get().message,E.$emit("updateError",n);case 9:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(f["c"]);te=Object(l["a"])([f["a"]],te);var re=te,ne=function(e){Object(s["a"])(r,e);var t=Object(i["a"])(r);function r(){var e;return Object(u["a"])(this,r),e=t.apply(this,arguments),e.value="",e.error="",e.loading=!1,e.baseCurrency="USD",e.targetCurrency="RUB",e.amount=0,e.actualRates=null,e}return Object(o["a"])(r,[{key:"rate",get:function(){return this.actualRates?this.actualRates[this.targetCurrency]:null}},{key:"label",get:function(){return"".concat(this.baseCurrency," TO ").concat(this.targetCurrency)}},{key:"result",get:function(){if(this.rate){var e=this.amount*this.rate;return Number(e.toFixed(2))}return null}},{key:"_handleInput",value:function(){var e=Object(Z["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,c,u,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=new RegExp(/\d+\s{1}[A-Za-z]{3}\s{1}in\s{1}[A-Za-z]{3}$/),n=r.test(t),this.loading=!0,!n){e.next=25;break}if(a=t.match(/[A-Za-z]{3}/g),!a){e.next=25;break}if(this.baseCurrency=a[0].toUpperCase(),this.targetCurrency=a[1].toUpperCase(),c=t.match(/\d+\s/),!c||!c.length){e.next=24;break}if(this.error="",this.amount=Number(c[0]),o=this.cachedValue(this.baseCurrency),!o){e.next=17;break}this.actualRates=o.data,e.next=21;break;case 17:return e.next=19,this.updateRates(this.baseCurrency);case 19:u=e.sent,u&&(s=[],s.push({from:this.baseCurrency,data:u,timestamp:Date.now()/1e3}),this.saveCache(s),this.actualRates=u);case 21:this.loading=!1,e.next=25;break;case 24:this.error='Текст в формате "15 usd in rub"';case 25:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"cachedValue",value:function(e){var t=localStorage.getItem("converter-data");if(t){var r=JSON.parse(t),n=Math.floor(Date.now()/1e3),a=86400,c=r.filter((function(e){return n-e.timestamp<=a})),u=c.find((function(t){return t.from===e}));if(this.saveCache(c),u)return u}return null}},{key:"saveCache",value:function(e){if(e.length){var t=JSON.stringify(e);localStorage.setItem("converter-data",t)}else localStorage.removeItem("converter-data")}}]),r}(Object(f["b"])(re));ne=Object(l["a"])([f["a"]],ne);var ae=ne,ce=ae,ue=(r("8bd0"),r("8654")),oe=Object(y["a"])(ce,F,L,!1,null,null,null),se=oe.exports;g()(oe,{VTextField:ue["a"]});var ie=se,le=function(e){Object(s["a"])(r,e);var t=Object(i["a"])(r);function r(){return Object(u["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r)}(f["c"]);le=Object(l["a"])([Object(f["a"])({components:{"c-convert-input":ie}})],le);var fe=le,pe=fe,ve=(r("b2f4"),Object(y["a"])(pe,z,D,!1,null,null,null)),be=ve.exports;g()(ve,{VCol:k["a"],VContainer:x["a"],VRow:w["a"]});var de=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"v-currencies"},[r("v-row",[r("v-col",[r("div",{staticClass:"v-currencies__base-setter mb-4"},[r("v-select",{attrs:{items:e.currencies,"item-text":"name","item-value":"name",outlined:"",label:"Базовая валюта"},on:{change:function(t){return e.updateRates(t)}},model:{value:e.baseCurrency,callback:function(t){e.baseCurrency=t},expression:"baseCurrency"}})],1)])],1),r("v-row",[e.loading?e._l(9,(function(e){return r("v-col",{key:e,staticClass:"mb-8",attrs:{sm:"2",cols:"6"}},[r("v-skeleton-loader",{attrs:{type:"card"}})],1)})):e._l(e.currencies,(function(t){return r("v-col",{key:"currency-"+t.name,attrs:{sm:"2",cols:"6"}},[r("v-card",[r("v-card-title",[e._v(" "+e._s(t.name)+" ")]),r("v-card-title",[e._v(" "+e._s(e.getCurrencyItem(t.name,t.rate))+" ")])],1)],1)}))],2)],1)},he=[],ye=function(e){Object(s["a"])(r,e);var t=Object(i["a"])(r);function r(){var e;return Object(u["a"])(this,r),e=t.apply(this,arguments),e.baseCurrency="RUB",e.currencies=[],e.loading=!1,e}return Object(o["a"])(r,[{key:"created",value:function(){this.buildCurrencyList()}},{key:"buildCurrencyList",value:function(){var e=Object(Z["a"])(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.updateRates(this.baseCurrency);case 3:if(t=e.sent,t){for(n in r=[],t)r.push({name:n,rate:t[n]});this.currencies=r,this.loading=!1}case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getCurrencyItem",value:function(e,t){var r=t.toFixed(3);return"".concat(r).concat(this.baseCurrency)}}]),r}(Object(f["b"])(re));ye=Object(l["a"])([f["a"]],ye);var me=ye,ge=me,Oe=(r("f9cf"),r("b0af")),je=r("99d9"),ke=r("b974"),xe=r("3129"),we=Object(y["a"])(ge,de,he,!1,null,null,null),Ce=we.exports;g()(we,{VCard:Oe["a"],VCardTitle:je["a"],VCol:k["a"],VContainer:x["a"],VRow:w["a"],VSelect:ke["a"],VSkeletonLoader:xe["a"]}),n["a"].use(N["a"]);var _e=[{path:"/",name:"Конвертер",component:be},{path:"/currencies",name:"Курсы валют",component:Ce}],Re=new N["a"]({mode:"history",base:"/",routes:_e}),Ve=Re,Se=r("f309"),$e=r("0879");n["a"].use(Se["a"]);var Ee=new Se["a"]({lang:{locales:{ru:$e["a"]},current:"ru"},icons:{iconfont:"fa"}}),Te=r("2f62");n["a"].use(Te["a"]);var Be=new Te["a"].Store({state:{},mutations:{},actions:{},modules:{}});n["a"].config.productionTip=!1,new n["a"]({router:Ve,vuetify:Ee,store:Be,render:function(e){return e(J)}}).$mount("#app")},f9cf:function(e,t,r){"use strict";r("aa08")}});
//# sourceMappingURL=app.681c71d3.js.map